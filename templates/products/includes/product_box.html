{% load static %}
<div class="col-md-4 p-0">
    <article class="card mx-0 mx-md-2 mt-3 border-0">
        <a href="{% url 'products:detail' product.id %}">
            <img src="{{ product.image.url }}" class="card-img-top img-fluid" alt="{{ product.name }}">
        </a>
        <div class="row card-body mx-0 pt-1 pb-0">
            <p class="col-12 card-text text-primary mb-1 pl-1">{{ product.name|truncatechars:30 }}</p>
            <div class="col-8 text-dark pl-1">â‚¬{{ product.price }}</div>
				{% if cart %}
				{% for key in cart.items %}
				{% if key.0|stringformat:"s" == product.id|stringformat:"s" %}
                <form class="col-2 text-center" action="#?next={{ request.path }}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="quantity" value="1" min="1" max="1">
                    <button type="submit" class="btn btn-link p-0"><object type="image/svg+xml" data="{% static 'icons/cart-check.svg' %}">
                        <img src="{% static 'icons/cart-check.svg' %}" alt="Add to Cart">
                    </object></button>
                </form>
				{% endif %}
				{% endfor %}
				{% else %}
                <form class="col-2 text-center" action="{% url 'cart:add_to_cart' product.id %}?next={{ request.path }}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="quantity" value="1" min="1" max="1">
                    <button type="submit" class="btn btn-link p-0"><object type="image/svg+xml" data="{% static 'icons/cart-plus.svg' %}">
                        <img src="{% static 'icons/cart-plus.svg' %}" alt="Add to Cart">
                    </object></button>
                </form>
                {% endif %}   
            <div class="col-2 text-center">
                <object type="image/svg+xml" data="{% static 'icons/heart.svg' %}">
                    <img src="{% static 'icons/heart.svg' %}" alt="Like">
                </object>
            </div>
            <p class="col-12 text-white mb-0 p-0">{% for tag in product.admin_tags %}
                <a href="#" class="btn btn-primary rounded-sm mb-1 px-1 py-0">{{tag}}</a> {% endfor %}{% if product.user_tags %}{% for tag in product.user_tags %}<a href="#" class="btn btn-primary rounded-sm mb-1 px-1 py-0">{{tag}}</a> {% endfor %}{% endif %}
            </p>
        </div>
    </article>
</div>
